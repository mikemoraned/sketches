<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html xmlns="http://www.w3.org/1999/html">
  <head>
    <title>Presentation</title>
      <link rel="stylesheet" href="http://www.jasondavies.com/bloomfilter/bloomvis.css">
      <script src="http://www.jasondavies.com/media/js/d3.min.js"></script>
      <meta charset='utf-8'>
      <script
        src='http://html5slides.googlecode.com/svn/trunk/slides.js'></script>
  </head>
  
  <style>
    /* Your individual styles here, or just use inline styles if that’s
       what you want. */
    
    
  </style>

  <body style='display: none'>

    <section class='slides layout-regular'>
      
      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->
      <article>
        <h1>
          Sketch Algorithms
        </h1>
        <h3>Those wierd-shaped things in your toolbox</h3>
        <p>
          Mike Moran
        </p>
      </article>

      <article>
        <h2>
          Bloom filter
        </h2>
      </article>
      <!--
      <article class='nobackground'>
        <iframe src='http://www.jasondavies.com/bloomfilter/'></iframe>
      </article>
-->
      <article class='nobackground'>
        <p><label for="key">Key:</label> <input type="text" id="key"> <button id="add" class="first last">Add</button>
          <div id="vis"></div>
        </p>
        <script src="http://www.jasondavies.com/bloomfilter/bloomfilter.js"></script>
        <script src="http://www.jasondavies.com/bloomfilter/bloomvis.js"></script>
        <script>
            // HACK
            function add(key) {
                if (!(key in keySet)) {
                    keySet[key] = 1;
                    bloom.add(key);
                    keys.push({key: key, value: locations(bloom, key)});
                    update();
                }
                keyInput.property("value", "");
            }

            function reset() {
                bloom = new BloomFilter(50, 3);
                keys = [];
                keySet = {};
                d3.select("#vis input").attr("value", "");
                update();
            }

            function lookup(key) {
                queryText = key;
                d3.select("#vis input").attr("value", key);
                update();
            }

            var action = 0;
            var actions = [
                function() {
                    add("mary");
                },
                function() {
                    add("had");
                },
                function() {
                    lookup("mary");
                },
                function() {
                    add("a");
                },
                function() {
                    add("little");
                },
                function() {
                    add("lamb");
                },
                function() {
                    lookup("feepsteriser");
                },
                function() {
                    add("b");
                },
                function() {
                    add("c");
                },
                function() {
                    add("d");
                },
                function() {
                    add("e");
                },
                function() {
                    add("f");
                },
                function() {
                    add("g");
                },
                function() {
                    add("h");
                },
                function() {
                    add("i");
                },
                function() {
                    add("j");
                },
                function() {
                    add("k");
                },
                function() {
                    add("l");
                },
                function() {
                    add("m");
                },
                function() {
                    add("n");
                },
                reset
            ];

            window.setInterval(function() {
                actions[action]();
                action = (action + 1) % actions.length;
            }, 1500);

        </script>
      </article>

      <article>
        <h3>
          Thank you!
        </h3>
      </article>

    </section>

  </body>
</html>
